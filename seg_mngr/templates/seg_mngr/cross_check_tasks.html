{% extends "seg_mngr/base.html" %}
{% block title %} Server Manager{% endblock %}
{% block content %}
<div class="col-md-6">
<h4>Registro de control cruzado en el server</h4>


<form id="form" action='.' method='post' enctype="multipart/form-data">
        {% csrf_token %}
        <table class="table table-bordered">
        	<tr>
        		<td>Server  </td><td><strong>{{server.name}}</string></td>
        	</tr>
        {{form.as_table}}
        </table>
        
        <table class="table table-bordered">
        {% for fila in tasks %}
        	<tr>
        		<td>{{fila.name}}</td>
        		<td>
        			<div class="btn-group" data-toggle="buttons">
  						<label class="btn btn-primary">
    					<input type="radio" name="task-{{fila.id}}-1" 
    					id="option1" class="resultado_check_tarea"> Exitoso
  						</label>
  						<label class="btn btn-primary">
    					<input type="radio" name="task-{{fila.id}}-0" 
    					id="option2" class="resultado_check_tarea"> No exitoso
  						</label>  						
						</div>
        		</td>        		
        	</tr>
        {% endfor %}
        </table>
        <p id='errores' style="color:#FF0000;font-weight: bold;"></p>
        
		<a class="btn btn-primary"  href="/cross_check/{{server.id}}">Volver</a>
		
		<input id="radio_comprobar" value="Guardar" class="btn btn-primary pull-right" />
</form> 
</div>
{% endblock %}

{% block script %}
<script type="text/javascript">
 $(document).ready(function() {
	 $("#radio_comprobar").click(function() {
		 var resultado = $('.resultado_check_tarea').filter(":checked");		
		 var tasks = {{tasks_len}}		 
		 if (resultado.length == tasks) {  
			 $("#form").submit();
	        } else {  
	            
	            $("#errores").html("Debe seleccionar un boton por tarea");
	        }  
	    });  
});

</script>
{% endblock %}